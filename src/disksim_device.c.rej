--- src/disksim_device.c	2008-05-11 14:30:53.000000000 -0700
+++ src/disksim_device.c	2008-09-24 16:16:35.663400200 -0700
@@ -62,6 +62,7 @@
 #include "disksim_simpledisk.h"
 #include "memsmodel/mems_global.h"
 #include "memsmodel/mems_disksim.h"
+#include "ssdmodel/ssd.h"  /* SSD: */
 #include "config.h"
 
 #include "modules/modules.h"
@@ -111,6 +112,9 @@
       case DEVICETYPE_MEMS:
 	return (struct device_header *)getmems(devicenos[c]);
 	break;
+      case DEVICETYPE_SSD: /* SSD: */
+	return (struct device_header *)getssd(devicenos[c]);
+	break;
       }
     }
   }
@@ -144,14 +148,26 @@
   bzero(disksim->deviceinfo->devicenames + c, zerocnt * sizeof(char *));
 
   devicenos = realloc(devicenos, newlen*sizeof(int));
+#ifndef WIN32
   bzero(devicenos + c, zerocnt * sizeof(int));
+#else
+  bzero(devicenos + c, zerocnt * sizeof(*(devicenos)));
+#endif
 
   devicetypes = realloc(devicetypes, newlen*sizeof(int));
+#ifndef WIN32
   bzero(devicetypes + c, zerocnt * sizeof(int));
+#else
+  bzero(devicetypes + c, zerocnt * sizeof(*(devicetypes)));
+#endif
 
   disksim->deviceinfo->devices = realloc(disksim->deviceinfo->devices, 
 					 newlen*sizeof(int));
+#ifndef WIN32
   bzero(disksim->deviceinfo->devices + c, zerocnt * sizeof(int));
+#else
+  bzero(disksim->deviceinfo->devices + c, zerocnt * sizeof(*(disksim->deviceinfo->devices)));
+#endif
 
   disksim->deviceinfo->devs_len = newlen;
 
@@ -204,6 +220,7 @@
   disk_initialize ();
   simpledisk_initialize ();
   mems_initialize ();
+  ssd_initialize ();
 }
 
 void device_resetstats (void)
@@ -212,6 +229,7 @@
    disk_resetstats ();
    simpledisk_resetstats ();
    mems_resetstats ();
+   ssd_resetstats ();
 }
 
 
@@ -221,6 +239,7 @@
    disk_printstats ();
    simpledisk_printstats ();
    mems_printstats ();
+   ssd_printstats ();
 }
 
 
